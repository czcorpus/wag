{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "definitions": {
        "Backlink": {
            "properties": {
                "label": {
                    "anyOf": [
                        {
                            "additionalProperties": {
                                "type": "string"
                            },
                            "type": "object"
                        },
                        {
                            "type": "string"
                        }
                    ]
                },
                "method": {
                    "enum": [
                        "CONNECT",
                        "DELETE",
                        "GET",
                        "HEAD",
                        "OPTIONS",
                        "PATCH",
                        "POST",
                        "PUT",
                        "TRACE"
                    ],
                    "type": "string"
                },
                "subcname": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                }
            },
            "required": [
                "label",
                "url"
            ],
            "type": "object"
        },
        "ColorsConf": {
            "description": "This specifies a 'theming' for\nJavaScript generated stuff\n(mainly chart colors).",
            "properties": {
                "bar": {
                    "items": {
                        "type": "string"
                    },
                    "type": "array"
                },
                "category": {
                    "items": {
                        "type": "string"
                    },
                    "type": "array"
                },
                "categoryOther": {
                    "type": "string"
                },
                "scale": {
                    "items": {
                        "type": "string"
                    },
                    "type": "array"
                }
            },
            "required": [
                "bar",
                "category",
                "categoryOther",
                "scale"
            ],
            "type": "object"
        },
        "GroupLayoutConfig": {
            "properties": {
                "groupDescURL": {
                    "anyOf": [
                        {
                            "additionalProperties": {
                                "type": "string"
                            },
                            "type": "object"
                        },
                        {
                            "type": "string"
                        }
                    ]
                },
                "groupLabel": {
                    "anyOf": [
                        {
                            "additionalProperties": {
                                "type": "string"
                            },
                            "type": "object"
                        },
                        {
                            "type": "string"
                        }
                    ]
                },
                "groupTemplate": {
                },
                "tiles": {
                    "items": {
                        "properties": {
                            "tile": {
                                "type": "string"
                            },
                            "width": {
                                "type": "number"
                            }
                        },
                        "required": [
                            "tile",
                            "width"
                        ],
                        "type": "object"
                    },
                    "type": "array"
                }
            },
            "required": [
                "groupLabel",
                "tiles"
            ],
            "type": "object"
        },
        "HomePageTileConf": {
            "properties": {
                "contents": {
                    "additionalProperties": {
                        "anyOf": [
                            {
                                "properties": {
                                    "file": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "file"
                                ],
                                "type": "object"
                            },
                            {
                                "type": "string"
                            }
                        ]
                    },
                    "type": "object"
                },
                "label": {
                    "additionalProperties": {
                        "type": "string"
                    },
                    "type": "object"
                }
            },
            "required": [
                "contents",
                "label"
            ],
            "type": "object"
        },
        "HomepageConf": {
            "properties": {
                "tiles": {
                    "items": {
                        "$ref": "#/definitions/HomePageTileConf"
                    },
                    "type": "array"
                }
            },
            "required": [
                "tiles"
            ],
            "type": "object"
        },
        "LanguageAnyTileConf": {
            "additionalProperties": {
                "additionalProperties": {
                    "$ref": "#/definitions/TileConf"
                },
                "type": "object"
            },
            "type": "object"
        },
        "LanguageLayoutsConfig": {
            "additionalProperties": {
                "$ref": "#/definitions/LayoutsConfig"
            },
            "description": "These types are necessary to create config schemata\nusing Makefile for tiles and layouts only",
            "type": "object"
        },
        "LayoutsConfig": {
            "properties": {
                "cmp": {
                    "properties": {
                        "allowMultiWordQuery": {
                            "type": "boolean"
                        },
                        "groups": {
                            "items": {
                                "anyOf": [
                                    {
                                        "$ref": "#/definitions/GroupLayoutConfig"
                                    },
                                    {
                                        "type": "string"
                                    }
                                ]
                            },
                            "type": "array"
                        }
                    },
                    "required": [
                        "groups"
                    ],
                    "type": "object"
                },
                "single": {
                    "properties": {
                        "allowMultiWordQuery": {
                            "type": "boolean"
                        },
                        "groups": {
                            "items": {
                                "anyOf": [
                                    {
                                        "$ref": "#/definitions/GroupLayoutConfig"
                                    },
                                    {
                                        "type": "string"
                                    }
                                ]
                            },
                            "type": "array"
                        }
                    },
                    "required": [
                        "groups"
                    ],
                    "type": "object"
                },
                "translat": {
                    "properties": {
                        "allowMultiWordQuery": {
                            "type": "boolean"
                        },
                        "groups": {
                            "items": {
                                "anyOf": [
                                    {
                                        "$ref": "#/definitions/GroupLayoutConfig"
                                    },
                                    {
                                        "type": "string"
                                    }
                                ]
                            },
                            "type": "array"
                        },
                        "targetLanguages": {
                            "items": {
                                "type": "string"
                            },
                            "type": "array"
                        }
                    },
                    "required": [
                        "groups",
                        "targetLanguages"
                    ],
                    "type": "object"
                }
            },
            "type": "object"
        },
        "TileConf": {
            "description": "A configuration for a tile\nprovided by hosting page",
            "properties": {
                "backlink": {
                    "$ref": "#/definitions/Backlink",
                    "description": "An optional link to an application the specific tile\nrepresents (more or less). It is expected that the\ntile logic is able to pass proper arguments to the\npage."
                },
                "helpURL": {
                    "anyOf": [
                        {
                            "additionalProperties": {
                                "type": "string"
                            },
                            "type": "object"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "An address providing a raw text or an HTML which will be\nused as a help for the tile. Please make sure only trusted\nsources are used here as the HTML is injected \"as is\" to\nthe page."
                },
                "isDisabled": {
                    "description": "Normally, any tile configured in the \"tiles\" section\nwill be active no matter whether it is also in the\n\"layouts\" section. This allows e.g. a hidden concordance\ntile to ask for a concordance used by multiple visible\ntiles (e.g. colloc, freqs.). To be able to keep possibly\nusable items in the \"tiles\" configuration file it is\npossible to disable them. I.e. in case a tile is disabled\nit cannot be put in the layout without Wdglance complying\nabout invalid configuration.",
                    "type": "boolean"
                },
                "label": {
                    "anyOf": [
                        {
                            "additionalProperties": {
                                "type": "string"
                            },
                            "type": "object"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "A label used in the header of the tile"
                },
                "readSubqFrom": {
                    "anyOf": [
                        {
                            "items": {
                                "type": "string"
                            },
                            "type": "array"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "In case we depend on multiple tiles and some of them are\njust kind of hidden dependencies (i.e. we want to wait them\nto complate but we don't need their subquery args) this can\nbe used to distinguish the two dependency types.\n\nPlease note that this value is not used directly by WdG but\nit is rather provided for tile model to provide more information\nabout inter-tile dependencies. I.e. it is perfectly doable to\ndefine a subquery producing tile as a dependency via 'waitFor'.\nBut in more complex situations when we need some tiles to just\nwait for and some to also provide subqueries the model may not\nhave enough information to distinguish between the two."
                },
                "srcInfoURL": {
                    "type": "string"
                },
                "tileType": {
                    "description": "An identifier as defined by tiles configuration interface",
                    "type": "string"
                },
                "waitFor": {
                    "anyOf": [
                        {
                            "items": {
                                "type": "string"
                            },
                            "type": "array"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "In case a tile supports this (most of them does so) it can\nwait for a specific tile to finish its operation. Again,\nthis is used mainly for 'concordance -> analysis' combinations."
                }
            },
            "required": [
                "tileType"
            ],
            "type": "object"
        }
    },
    "description": "Client side app configuration as present in wdglance.json\nconfiguration file.",
    "properties": {
        "apiHeaders": {
            "additionalProperties": {
                "additionalProperties": {
                    "type": "string"
                },
                "type": "object"
            },
            "type": "object"
        },
        "colors": {
            "$ref": "#/definitions/ColorsConf"
        },
        "corpInfoApiUrl": {
            "type": "string"
        },
        "dbValuesMapping": {
            "additionalProperties": {
                "additionalProperties": {
                    "anyOf": [
                        {
                            "additionalProperties": {
                                "type": "string"
                            },
                            "type": "object"
                        },
                        {
                            "type": "string"
                        }
                    ]
                },
                "type": "object"
            },
            "type": "object"
        },
        "externalStyles": {
            "items": {
                "type": "string"
            },
            "type": "array"
        },
        "homepage": {
            "$ref": "#/definitions/HomepageConf"
        },
        "hostUrl": {
            "type": "string"
        },
        "layouts": {
            "anyOf": [
                {
                    "$ref": "#/definitions/LanguageLayoutsConfig"
                },
                {
                    "type": "string"
                }
            ]
        },
        "onLoadInit": {
            "items": {
                "type": "string"
            },
            "type": "array"
        },
        "reqCacheTTL": {
            "type": "number"
        },
        "rootUrl": {
            "type": "string"
        },
        "searchLanguages": {
            "additionalProperties": {
                "type": "string"
            },
            "type": "object"
        },
        "telemetry": {
            "properties": {
                "participationProbability": {
                    "type": "number"
                },
                "sendIntervalSecs": {
                    "type": "number"
                }
            },
            "required": [
                "participationProbability",
                "sendIntervalSecs"
            ],
            "type": "object"
        },
        "tiles": {
            "anyOf": [
                {
                    "$ref": "#/definitions/LanguageAnyTileConf"
                },
                {
                    "type": "string"
                }
            ]
        }
    },
    "required": [
        "apiHeaders",
        "colors",
        "corpInfoApiUrl",
        "dbValuesMapping",
        "homepage",
        "hostUrl",
        "layouts",
        "reqCacheTTL",
        "rootUrl",
        "searchLanguages",
        "tiles"
    ],
    "type": "object"
}

